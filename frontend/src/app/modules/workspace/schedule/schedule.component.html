<div class="schedule-page-container">
    <div class="schedule-container">
        <p class="date-text">{{date}}</p>
        <div class="schedule">
            <div class="first-half-schedule">
                <span
                    *ngFor="let hour of firstHalfHours"
                    class="time-container"
                >
                    <div class="time">
                        {{hour.hour}}:00
                    </div>
                    <div
                        *ngIf="hour.activity !== null"
                        class="scheduled-activity side-borders"
                        [ngClass]="{topBorder:!hour.hasPrevious,
                            bottomBorder:!hour.hasNext,
                            scheduledActivity:true,
                            sideBorders:true,
                            centralScheduled:hour.hasNext&&hour.hasPrevious}"
                        [ngStyle]="{'border-color':setBorderColor(hour.activity)}"
                    >
                        <div (click)="showScheduledActivityDialog(hour.activity)">
                            <p
                                class="activity-name"
                                *ngIf="!hour.hasPrevious && hour.activity"
                            >
                                {{hour.activity.name}}
                            </p>
                        </div>
                    </div>
                </span>
            </div>
            <div class="first-half-schedule">
                <span
                    *ngFor="let hour of secondHalfHours"
                    class="time-container"
                >
                    <div class="time">
                        {{hour.hour}}:00
                    </div>
                    <div
                        *ngIf="hour.activity !== null"
                        class="scheduled-activity side-borders"
                        [ngClass]="{topBorder:!hour.hasPrevious,
                            bottomBorder:!hour.hasNext,
                            scheduledActivity:true,
                            sideBorders:true,
                            centralScheduled:hour.hasNext&&hour.hasPrevious}"
                        [ngStyle]="{'border-color':setBorderColor(hour.activity)}"
                    >
                        <div (click)="showScheduledActivityDialog(hour.activity)">
                            <p
                                class="activity-name"
                                *ngIf="!hour.hasPrevious && hour.activity"
                            >
                                {{hour.activity.name}}
                            </p>
                        </div>
                    </div>
                </span>
            </div>
        </div>
    </div>
    <div class="tasks-container">
        <div class="tasks-header">
            <img
                src="../../../../assets/img/tasks.svg"
                class="tasks-img"
            >
            <p class="header-text">My tasks</p>
        </div>
        <div class="tasks-list">
            <button
                class="edit-icon"
                (click)="changeIsEditingState()">
                <img
                    *ngIf="!isEditing"
                    src="../../../../assets/img/edit.svg"
                    class="write-icon">
                <img
                    *ngIf="isEditing"
                    src="../../../../assets/img/mark.svg"
                    class="write-icon">
            </button>
            <div class="tasks">
                <div *ngFor="let tag of tags" class="tag">
                    <div class="tag-header-container">
                        <p class="tag-header">
                            {{tag.name}}
                        </p>
                        <div
                            class="edit-container"
                            *ngIf="isEditing">
                            <button
                                (click)="showTagDialog(tag)"
                                class="edit-button">
                                <img
                                    src="../../../../assets/img/write.svg"
                                    class="activity-edit-icon">
                            </button>
                        </div>
                    </div>
                    <div
                        class="activity"
                        *ngFor="let activity of tag.activities"
                    >
                        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="bullet">
                            <circle class="svg-circle" [ngStyle]="{'filter': setSvgColor(tag)}"/>
                        </svg>
                        <button
                            type="button"
                            class="activity-button"
                            (click)="showScheduleActivityDialog(activity)"
                        >
                            {{activity.name}}
                        </button>
                        <div
                            class="edit-container"
                            *ngIf="isEditing">
                            <button
                                class="edit-button"
                                (click)="showActivityDialog(activity)">
                                <img
                                    src="../../../../assets/img/write.svg"
                                    class="activity-edit-icon">
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <button
                class="add-activity-button"
                (click)="showAddActivityDialog()"
            >
                <mat-icon class="add-activity-icon">add_circle</mat-icon>
                Add new activity
            </button>
        </div>
    </div>
</div>